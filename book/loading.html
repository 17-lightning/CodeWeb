<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title id="title">
        </title>
    </head>
    <body>
        <h1 id="function">
        </h1>
        <pre>
            <code id="description">
            </code>
        </pre>
        <button type="button" onclick=javascript:begin_edit()>编辑</button>

        <h2>快速跳转</h2>
        <p id="group">
        </p>
        <button type="button">注册</button>

        <h2>参数列表</h2>
        <table border="2" cellspacing="0">
            <thead>
                <tr>
                    <th align="center" id="ret_thead">
                    </th>
                    <th id="function_thead">
                    </th>
                    <th>
                        <textarea id="para_area" rows="1" cols="1">
</textarea>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td id="ret">

                    </td>
                    <td id="para_0">

                    </td>
                    <td><button type="button" onclick=javascript:edit_para(0)>更新</button></td>
                </tr>
                <replace id="param_list"/>
            </tbody>
        </table>

        <h2>相关元素</h2>
        <table border="2" cellspacing="0">
            <thead>
                <tr>
                    <th align="center">
                        当前函数
                    </th>
                    <th id="function">
                    </th>
                    <th>
                        <textarea id="relate" rows="1" cols="1">
</textarea>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td align="center">父函数</td>
                    <td id="parent">

                    </td>
                    <td><button type="button" onclick=javascript:attach_ref("add_parent")>链接</button></td>
                </tr>
                <tr>
                    <td align="center">子函数</td>
                    <td id="child">

                    </td>
                    <td><button type="button" onclick=javascript:attach_ref("add_child")>链接</button></td>
                </tr>
                <tr>
                    <td align="center">结构体</td>
                    <td id="struct">

                    </td>
                    <td><button type="button" onclick=javascript:attach_ref("add_struct")>链接</button></td>
                </tr>
                <tr>
                    <td align="center">全局变量</td>
                    <td id="global">

                    </td>
                    <td><button type="button" onclick=javascript:attach_ref("add_global")>链接</button></td>
                </tr>
                <tr>
                    <td align="center">宏</td>
                    <td id="macro">

                    </td>
                    <td><button type="button" onclick=javascript:attach_ref("add_macro")>链接</button></td>
                </tr>
                <tr>
                    <td align="center">其他</td>
                    <td id="else">

                    </td>
                    <td><button type="button" onclick=javascript:attach_ref("add_else")>链接</button></td>
                </tr>
            </tbody>
        </table>

        <h2>函数详情</h2>
        <pre>
            <code id="content">
            </code>
        </pre>
        <button type="button" onclick=javascript:begin_code()>修改</button>
    </body>

    <script id="script">
        function trans_content(text) {
            return text
                .replace(/\n/g, "%0A")
                .replace(/&/g, "%26")
                .replace(/\?/g, "%3F")
                .replace(/%/g, "%25")
                .replace(/=/g, "%3D");
        }
        function begin_edit() {
            window.location.href="http://localhost:8000/document-show?target=" + url_me + "&edit";
        }
        function finish_edit() {
            window.location.href="http://localhost:8000/document-show?target=" + url_me + "&edit=" + trans_content(document.getElementById("description_area").value);
        }
        function begin_code() {
            window.location.href="http://localhost:8000/document-show?target=" + url_me + "&code";
        }
        function finish_code() {
            window.location.href="http://localhost:8000/document-show?target=" + url_me + "&code=" + trans_content(document.getElementById("coding_area").value);
        }
        function edit_para(index) {
            window.location.href="http://localhost:8000/document-show?target=" + url_me + "&para_" + index + "=" + trans_content(document.getElementById("para_area").value);
        }
        function attach_ref(tag) {
            window.open("http://localhost:8000/document-search?target=" + trans_content(document.getElementById("relate").value) + "&" + tag + "=" + url_me);
        }
    </script>
</html>